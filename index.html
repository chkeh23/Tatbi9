<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëΩ Alien Musk Quantum Mining Platform v6.0</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëΩ</text></svg>">
    
    <style>
        /* =========================================== */
        /* üëΩ ALIEN MUSK QUANTUM CSS - COMPLETE */
        /* =========================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            /* QUANTUM ALIEN COLORS */
            --quantum-green: #00ff88;
            --quantum-blue: #00d4ff;
            --quantum-purple: #9d4edd;
            --quantum-pink: #ff0080;
            --quantum-cyan: #00ffff;
            
            /* QUANTUM DARK SPACE THEME */
            --space-dark: #0a0a0f;
            --space-darker: #050510;
            --space-card: #1a1a2e;
            --space-border: rgba(0, 255, 136, 0.3);
            
            /* QUANTUM TEXT COLORS */
            --quantum-text: #ffffff;
            --quantum-text-light: #b0b0d0;
            
            /* QUANTUM GRADIENTS */
            --gradient-quantum: linear-gradient(135deg, var(--quantum-green), var(--quantum-blue));
            --gradient-stellar: linear-gradient(135deg, var(--quantum-purple), var(--quantum-pink));
            --gradient-space: linear-gradient(145deg, var(--space-card), #16213e);
            
            /* QUANTUM SHADOWS & GLOWS */
            --glow-quantum: 0 0 20px rgba(0, 255, 136, 0.5);
            --shadow-space: 0 8px 32px rgba(0, 0, 0, 0.6);
            
            /* QUANTUM RADIUS */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            /* QUANTUM SPACING */
            --space-xs: 6px;
            --space-sm: 10px;
            --space-md: 14px;
            --space-lg: 18px;
            --space-xl: 24px;
            
            /* QUANTUM TYPOGRAPHY */
            --font-xs: 11px;
            --font-sm: 13px;
            --font-base: 15px;
            --font-md: 17px;
            --font-lg: 20px;
            --font-xl: 24px;
        }

        /* BASE SPACE STYLES */
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: var(--space-dark);
            color: var(--quantum-text);
            font-size: var(--font-base);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* SIMPLE LOADING SCREEN */
        #simple-loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--space-darker);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--quantum-green);
            border-top: 3px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* APP CONTAINER */
        #app-container {
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .hidden {
            display: none !important;
        }

        /* QUANTUM HEADER */
        .app-header {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--space-border);
            padding: var(--space-sm) var(--space-md);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 60px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            flex: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: var(--radius-md);
            border: 1px solid var(--space-border);
            cursor: pointer;
        }

        .logo i {
            font-size: 18px;
            color: var(--quantum-green);
        }

        .logo span {
            font-size: var(--font-md);
            font-weight: 700;
            color: var(--quantum-text);
        }

        .user-info-mini {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 10px;
            border-radius: var(--radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-avatar-mini {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--quantum-green);
            box-shadow: var(--glow-quantum);
        }

        .user-details-mini {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .username-mini {
            font-size: var(--font-sm);
            font-weight: 600;
            color: var(--quantum-text);
        }

        .user-id-mini {
            font-size: var(--font-xs);
            color: var(--quantum-text-light);
        }

        .total-balance-header {
            background: rgba(0, 212, 255, 0.1);
            padding: 8px 12px;
            border-radius: var(--radius-md);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .balance-amount-header {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 2px;
        }

        .balance-amount-header i {
            font-size: 14px;
            color: var(--quantum-blue);
        }

        .balance-amount-header span:first-of-type {
            font-size: var(--font-md);
            font-weight: 700;
            color: var(--quantum-text);
        }

        .balance-usd-header {
            font-size: var(--font-xs);
            color: var(--quantum-text-light);
        }

        /* QUANTUM NAVIGATION */
        .main-nav {
            display: flex;
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(15px);
            border-radius: var(--radius-md);
            margin: var(--space-sm) var(--space-md);
            padding: 4px;
            gap: 2px;
            position: sticky;
            top: 68px;
            z-index: 900;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-btn {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 10px 4px;
            background: transparent;
            border: none;
            border-radius: var(--radius-sm);
            color: var(--quantum-text-light);
            font-size: var(--font-sm);
            cursor: pointer;
        }

        .nav-btn i {
            font-size: 18px;
        }

        .nav-btn span {
            font-size: var(--font-xs);
            font-weight: 600;
        }

        .nav-btn.active {
            color: white;
            background: var(--gradient-quantum);
            box-shadow: var(--glow-quantum);
        }

        /* QUANTUM PAGES */
        .page {
            display: none;
            padding: var(--space-md);
        }

        .page.active {
            display: block;
        }

        /* MINING SECTION */
        .mining-section {
            background: var(--gradient-space);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            border: 1px solid var(--space-border);
            box-shadow: var(--shadow-space);
        }

        .mining-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mining-header h3 {
            font-size: var(--font-md);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--quantum-text);
        }

        .mining-header h3 i {
            color: var(--quantum-green);
            font-size: 18px;
        }

        .mining-stats {
            display: flex;
            gap: var(--space-md);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 6px 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .stat-label {
            font-size: var(--font-xs);
            color: var(--quantum-text-light);
            text-transform: uppercase;
        }

        .stat-value {
            font-size: var(--font-md);
            font-weight: 800;
            color: var(--quantum-green);
            font-family: monospace;
        }

        .mining-timer-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-lg);
            text-align: center;
            border: 1px solid rgba(0, 255, 136, 0.15);
        }

        .timer-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-sm);
        }

        .timer-display i {
            font-size: 20px;
            color: var(--quantum-green);
        }

        .timer-display span {
            font-size: var(--font-lg);
            font-weight: 800;
            font-family: monospace;
            color: var(--quantum-text);
            letter-spacing: 2px;
        }

        .next-reward {
            font-size: var(--font-sm);
            color: var(--quantum-text-light);
        }

        .next-reward span {
            color: var(--quantum-green);
            font-weight: 700;
            font-size: var(--font-md);
        }

        .mining-action-btn {
            width: 100%;
            padding: var(--space-lg);
            background: var(--gradient-quantum);
            border: none;
            border-radius: var(--radius-md);
            color: white;
            font-size: var(--font-md);
            font-weight: 700;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-md);
            cursor: pointer;
            margin-bottom: var(--space-lg);
            box-shadow: var(--glow-quantum);
        }

        .mining-info {
            display: flex;
            justify-content: space-around;
            gap: var(--space-sm);
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--font-sm);
            color: var(--quantum-text-light);
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex: 1;
            min-width: 140px;
        }

        .info-item i {
            font-size: 16px;
            color: var(--quantum-green);
        }

        /* UPGRADE SECTION */
        .upgrade-section {
            background: var(--gradient-space);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            border: 1px solid var(--space-border);
            box-shadow: var(--shadow-space);
        }

        .upgrade-section h4 {
            font-size: var(--font-md);
            margin-bottom: var(--space-lg);
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--quantum-text);
        }

        .upgrade-section h4 i {
            color: var(--quantum-blue);
            font-size: 18px;
        }

        .upgrade-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
        }

        .upgrade-card {
            background: rgba(42, 42, 74, 0.5);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            border: 1px solid var(--space-border);
        }

        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }

        .upgrade-level {
            font-size: var(--font-xs);
            font-weight: 700;
            color: var(--quantum-text-light);
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 8px;
            border-radius: var(--radius-sm);
        }

        .upgrade-name {
            font-size: var(--font-md);
            font-weight: 700;
            color: var(--quantum-text);
        }

        .upgrade-stats {
            margin-bottom: var(--space-md);
        }

        .upgrade-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: var(--font-sm);
            color: var(--quantum-text-light);
            margin-bottom: 6px;
        }

        .upgrade-stat i {
            font-size: 12px;
            width: 16px;
            text-align: center;
            color: var(--quantum-green);
        }

        .upgrade-btn {
            width: 100%;
            padding: 10px;
            font-size: var(--font-sm);
            font-weight: 700;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            background: rgba(0, 212, 255, 0.15);
            color: var(--quantum-blue);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .upgrade-btn.active-btn {
            background: rgba(0, 255, 136, 0.15);
            color: var(--quantum-green);
            border-color: rgba(0, 255, 136, 0.3);
        }

        /* NOTIFICATIONS */
        #notification-container {
            position: fixed;
            top: var(--space-md);
            left: 50%;
            transform: translateX(-50%);
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            width: 90%;
            max-width: 380px;
        }

        .message {
            padding: var(--space-md);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--font-sm);
            font-weight: 600;
            box-shadow: var(--shadow-space);
            backdrop-filter: blur(15px);
            border: 1px solid;
        }

        .message.success {
            background: rgba(0, 255, 136, 0.15);
            border-color: rgba(0, 255, 136, 0.3);
            color: var(--quantum-green);
        }

        .message.error {
            background: rgba(255, 68, 68, 0.15);
            border-color: rgba(255, 68, 68, 0.3);
            color: #ff4444;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .app-header {
                padding: var(--space-xs) var(--space-sm);
                min-height: 56px;
            }
            
            .logo span {
                font-size: var(--font-sm);
            }
            
            .user-avatar-mini {
                width: 32px;
                height: 32px;
            }
            
            .main-nav {
                margin: var(--space-xs) var(--space-sm);
                top: 64px;
            }
            
            .nav-btn {
                padding: 8px 3px;
            }
            
            .nav-btn i {
                font-size: 16px;
            }
            
            .page {
                padding: var(--space-sm);
            }
            
            .mining-section,
            .upgrade-section {
                padding: var(--space-md);
            }
            
            .mining-header {
                flex-direction: column;
                gap: var(--space-sm);
                text-align: center;
            }
            
            .mining-stats {
                width: 100%;
                justify-content: space-around;
            }
            
            .timer-display span {
                font-size: var(--font-md);
            }
            
            .info-item {
                min-width: 100%;
            }
            
            .upgrade-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Simple Loading Screen -->
    <div id="simple-loading">
        <div class="spinner"></div>
        <p style="color: #00ff88; font-weight: 600; margin-bottom: 5px;">Alien Musk Quantum</p>
        <p style="color: #94a3b8; font-size: 14px;">Initializing Quantum Systems...</p>
    </div>

    <!-- App Container -->
    <div id="app-container" class="hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <!-- Logo with Admin Secret -->
                <div class="logo" id="admin-logo">
                    <i class="fas fa-robot"></i>
                    <span>Alien Musk</span>
                </div>
                
                <!-- User Info Mini -->
                <div class="user-info-mini">
                    <img id="user-avatar-mini" class="user-avatar-mini" src="" alt="Avatar">
                    <div class="user-details-mini">
                        <div id="username-mini" class="username-mini">Alien</div>
                        <div id="user-id-mini" class="user-id-mini">ID: Loading...</div>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <!-- Total Balance -->
                <div class="total-balance-header">
                    <div class="balance-amount-header">
                        <i class="fas fa-coins"></i>
                        <span id="total-balance-amsk">0</span>
                        <span class="currency">AMSK</span>
                    </div>
                    <div class="balance-usd-header">
                        ‚âà $<span id="total-balance-usd">0.00</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation - 4 Buttons -->
        <nav class="main-nav">
            <button class="nav-btn active" data-page="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </button>
            <button class="nav-btn" data-page="staking">
                <i class="fas fa-gem"></i>
                <span>Staking</span>
            </button>
            <button class="nav-btn" data-page="wallet">
                <i class="fas fa-wallet"></i>
                <span>Wallet</span>
            </button>
            <button class="nav-btn" data-page="referral">
                <i class="fas fa-users"></i>
                <span>Referral</span>
            </button>
        </nav>

        <!-- Notification Container -->
        <div id="notification-container"></div>

        <!-- Home Page - Mining Section -->
        <div id="home-page" class="page active">
            <!-- Mining Section -->
            <section class="mining-section">
                <div class="mining-header">
                    <h3><i class="fas fa-microchip"></i> Quantum Mining Station</h3>
                    <div class="mining-stats">
                        <div class="stat-item">
                            <div class="stat-label">Level</div>
                            <div class="stat-value" id="current-mining-level">1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Hashrate</div>
                            <div class="stat-value" id="current-hashrate-display">2,500</div>
                        </div>
                    </div>
                </div>

                <!-- Mining Timer Card -->
                <div class="mining-timer-card">
                    <div class="timer-display">
                        <i class="fas fa-clock"></i>
                        <span id="mining-timer-display">01:00:00</span>
                    </div>
                    <div class="next-reward">
                        Next Reward: <span id="next-reward-amount">2,500</span> AMSK
                    </div>
                </div>

                <!-- Mining Action Button -->
                <button class="mining-action-btn" id="start-mining-btn">
                    <i class="fas fa-play"></i>
                    <span>Start Quantum Mining</span>
                </button>

                <!-- Mining Info -->
                <div class="mining-info">
                    <div class="info-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Total Mined: <span id="total-mined">2,500</span> AMSK</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-calendar-day"></i>
                        <span>Today: <span id="mined-today">2,500</span> AMSK</span>
                    </div>
                </div>
            </section>

            <!-- Upgrade Section -->
            <section class="upgrade-section">
                <h4><i class="fas fa-level-up-alt"></i> Upgrade Mining Level</h4>
                
                <div class="upgrade-cards">
                    <!-- Level 1 -->
                    <div class="upgrade-card" data-level="1">
                        <div class="upgrade-header">
                            <span class="upgrade-level">Level 1</span>
                            <span class="upgrade-name">Beginner</span>
                        </div>
                        <div class="upgrade-stats">
                            <div class="upgrade-stat">
                                <i class="fas fa-bolt"></i>
                                <span>Hashrate: 2,500</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-gift"></i>
                                <span>Reward: 2,500 AMSK/hour</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-coins"></i>
                                <span>Cost: 0 USDT</span>
                            </div>
                        </div>
                        <button class="upgrade-btn active-btn" data-level="1">Active</button>
                    </div>

                    <!-- Level 2 -->
                    <div class="upgrade-card" data-level="2">
                        <div class="upgrade-header">
                            <span class="upgrade-level">Level 2</span>
                            <span class="upgrade-name">Advanced</span>
                        </div>
                        <div class="upgrade-stats">
                            <div class="upgrade-stat">
                                <i class="fas fa-bolt"></i>
                                <span>Hashrate: 5,000</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-gift"></i>
                                <span>Reward: 5,000 AMSK/hour</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-coins"></i>
                                <span>Cost: 5 USDT</span>
                            </div>
                        </div>
                        <button class="upgrade-btn" data-level="2">Upgrade</button>
                    </div>

                    <!-- Level 3 -->
                    <div class="upgrade-card" data-level="3">
                        <div class="upgrade-header">
                            <span class="upgrade-level">Level 3</span>
                            <span class="upgrade-name">Pro</span>
                        </div>
                        <div class="upgrade-stats">
                            <div class="upgrade-stat">
                                <i class="fas fa-bolt"></i>
                                <span>Hashrate: 10,000</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-gift"></i>
                                <span>Reward: 10,000 AMSK/hour</span>
                            </div>
                            <div class="upgrade-stat">
                                <i class="fas fa-coins"></i>
                                <span>Cost: 20 USDT</span>
                            </div>
                        </div>
                        <button class="upgrade-btn" data-level="3">Upgrade</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Other pages will be added by app.js -->
        <div id="staking-page" class="page"></div>
        <div id="wallet-page" class="page"></div>
        <div id="referral-page" class="page"></div>
    </div>

    <!-- ============================================ -->
    <!-- JAVASCRIPT - COMPLETE ALIEN MUSK APP -->
    <!-- ============================================ -->
    <script>
        // ALIEN MUSK - Quantum Mining Platform v6.0 - COMPLETE
        // All JS in one file for GitHub compatibility

        console.log("üëΩ Alien Musk Quantum Platform v6.0 Loading...");

        // Telegram WebApp
        let tg = null;
        try {
            if (window.Telegram && window.Telegram.WebApp) {
                tg = window.Telegram.WebApp;
                tg.ready();
                tg.expand();
                console.log("‚úÖ Telegram WebApp initialized");
            }
        } catch (e) {
            console.log("‚ö†Ô∏è Not in Telegram environment");
        }

        // User Data
        let userData = {
            id: 'web_' + Date.now(),
            username: 'Alien',
            referralCode: 'ALIEN-' + Math.random().toString(36).substr(2, 6).toUpperCase()
        };

        // Wallet Data
        let walletData = {
            balances: {
                AMSK: 2500,
                USDT: 0
            },
            mining: {
                level: 1,
                active: false,
                totalMined: 2500
            }
        };

        // Elements Cache
        const elements = {};

        // Initialize App
        function initAlienMuskApp() {
            console.log("üöÄ Initializing Alien Musk Platform...");
            
            try {
                // Cache elements
                cacheElements();
                
                // Setup user
                setupUser();
                
                // Setup event listeners
                setupEventListeners();
                
                // Update UI
                updateUI();
                
                // Hide loading
                setTimeout(() => {
                    document.getElementById('simple-loading').style.display = 'none';
                    document.getElementById('app-container').classList.remove('hidden');
                    showMessage("üëΩ Welcome to Alien Musk Quantum Platform!", "success");
                }, 1000);
                
                console.log("‚úÖ Platform initialized successfully");
                
            } catch (error) {
                console.error("‚ùå Initialization failed:", error);
                showMessage("Failed to initialize platform", "error");
                document.getElementById('simple-loading').style.display = 'none';
                document.getElementById('app-container').classList.remove('hidden');
            }
        }

        function cacheElements() {
            console.log("üîç Caching elements...");
            
            // Header elements
            elements.usernameMini = document.getElementById('username-mini');
            elements.userIdMini = document.getElementById('user-id-mini');
            elements.userAvatarMini = document.getElementById('user-avatar-mini');
            elements.totalBalanceAmsk = document.getElementById('total-balance-amsk');
            elements.totalBalanceUsd = document.getElementById('total-balance-usd');
            elements.adminLogo = document.getElementById('admin-logo');
            
            // Navigation
            elements.navBtns = document.querySelectorAll('.nav-btn');
            elements.pages = document.querySelectorAll('.page');
            
            // Mining elements
            elements.startMiningBtn = document.getElementById('start-mining-btn');
            elements.miningTimerDisplay = document.getElementById('mining-timer-display');
            elements.currentMiningLevel = document.getElementById('current-mining-level');
            elements.currentHashrateDisplay = document.getElementById('current-hashrate-display');
            elements.nextRewardAmount = document.getElementById('next-reward-amount');
            elements.totalMined = document.getElementById('total-mined');
            
            // Upgrade elements
            elements.upgradeCards = document.querySelectorAll('.upgrade-card');
            elements.upgradeButtons = document.querySelectorAll('.upgrade-btn');
            
            console.log("‚úÖ Elements cached");
        }

        function setupUser() {
            console.log("üë§ Setting up user...");
            
            // Set user data
            if (elements.usernameMini) {
                elements.usernameMini.textContent = userData.username;
            }
            
            if (elements.userIdMini) {
                elements.userIdMini.textContent = `ID: ${userData.id.slice(-8)}`;
            }
            
            if (elements.userAvatarMini) {
                elements.userAvatarMini.src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${userData.id}`;
            }
            
            // Setup admin logo click
            if (elements.adminLogo) {
                let clickCount = 0;
                elements.adminLogo.addEventListener('click', function() {
                    clickCount++;
                    if (clickCount >= 5) {
                        showMessage("üîí Admin access activated!", "success");
                        clickCount = 0;
                    }
                });
            }
        }

        function setupEventListeners() {
            console.log("üéØ Setting up event listeners...");
            
            // Navigation buttons
            elements.navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const pageName = this.getAttribute('data-page');
                    
                    // Update active button
                    elements.navBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected page
                    elements.pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === pageName + '-page') {
                            page.classList.add('active');
                        }
                    });
                    
                    console.log("üöÄ Switched to page:", pageName);
                });
            });
            
            // Mining button
            if (elements.startMiningBtn) {
                elements.startMiningBtn.addEventListener('click', handleMiningAction);
            }
            
            // Upgrade buttons
            elements.upgradeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const card = this.closest('.upgrade-card');
                    if (card) {
                        const level = card.getAttribute('data-level');
                        upgradeMiningLevel(level);
                    }
                });
            });
            
            console.log("‚úÖ Event listeners setup complete");
        }

        function updateUI() {
            updateUserUI();
            updateMiningDisplay();
            updateTotalBalance();
        }

        function updateUserUI() {
            // User info is already set in setupUser
        }

        function updateMiningDisplay() {
            if (!walletData.mining) return;
            
            const mining = walletData.mining;
            
            // Update mining level
            if (elements.currentMiningLevel) {
                elements.currentMiningLevel.textContent = mining.level;
            }
            
            // Calculate hashrate
            let hashrate = 2500;
            if (mining.level === 2) hashrate = 5000;
            if (mining.level === 3) hashrate = 10000;
            
            if (elements.currentHashrateDisplay) {
                elements.currentHashrateDisplay.textContent = hashrate.toLocaleString();
            }
            
            // Update next reward
            let nextReward = hashrate;
            if (elements.nextRewardAmount) {
                elements.nextRewardAmount.textContent = nextReward.toLocaleString();
            }
            
            // Update stats
            if (elements.totalMined) {
                elements.totalMined.textContent = mining.totalMined.toLocaleString();
            }
            
            // Update mining button
            updateMiningButton();
            
            // Update upgrade cards
            updateUpgradeCards();
        }

        function updateMiningButton() {
            if (!elements.startMiningBtn) return;
            
            const mining = walletData.mining;
            
            if (!mining.active) {
                elements.startMiningBtn.innerHTML = '<i class="fas fa-play"></i><span>Start Mining</span>';
            } else {
                elements.startMiningBtn.innerHTML = '<i class="fas fa-play"></i><span>Mining...</span>';
                elements.startMiningBtn.disabled = true;
            }
        }

        function updateUpgradeCards() {
            if (!elements.upgradeCards || !walletData) return;
            
            const currentLevel = walletData.mining.level;
            
            elements.upgradeCards.forEach(card => {
                const level = parseInt(card.getAttribute('data-level'));
                const button = card.querySelector('.upgrade-btn');
                
                if (!button) return;
                
                if (level === currentLevel) {
                    // Current level
                    button.textContent = 'Active';
                    button.classList.add('active-btn');
                    button.disabled = true;
                } else if (level < currentLevel) {
                    // Lower level
                    button.textContent = 'Upgraded';
                    button.classList.add('active-btn');
                    button.disabled = true;
                } else {
                    // Higher level
                    button.textContent = 'Upgrade';
                    button.disabled = false;
                    button.classList.remove('active-btn');
                }
            });
        }

        function handleMiningAction() {
            if (!walletData.mining) return;
            
            const mining = walletData.mining;
            
            if (!mining.active) {
                // Start mining
                startMining();
            } else {
                // Already mining
                showMessage("‚è≥ Mining in progress...", "info");
            }
        }

        function startMining() {
            try {
                walletData.mining.active = true;
                
                // Calculate reward
                let reward = 2500;
                if (walletData.mining.level === 2) reward = 5000;
                if (walletData.mining.level === 3) reward = 10000;
                
                // Update balances
                walletData.balances.AMSK += reward;
                walletData.mining.totalMined += reward;
                
                // Update UI
                updateMiningDisplay();
                updateTotalBalance();
                
                // Show success
                showMessage(`üí∞ +${reward.toLocaleString()} AMSK mined!`, "success");
                
                // Disable button temporarily
                if (elements.startMiningBtn) {
                    elements.startMiningBtn.disabled = true;
                    setTimeout(() => {
                        walletData.mining.active = false;
                        elements.startMiningBtn.disabled = false;
                        updateMiningButton();
                    }, 60000); // 1 minute cooldown
                }
                
            } catch (error) {
                console.error("‚ùå Error starting mining:", error);
                showMessage("Failed to start mining", "error");
            }
        }

        function upgradeMiningLevel(level) {
            try {
                level = parseInt(level);
                
                // Check if already at this level
                if (level <= walletData.mining.level) {
                    showMessage("Already at or above this level!", "warning");
                    return;
                }
                
                // Check USDT balance for higher levels
                let cost = 0;
                if (level === 2) cost = 5;
                if (level === 3) cost = 20;
                
                if (cost > 0 && walletData.balances.USDT < cost) {
                    showMessage(`Need ${cost} USDT to upgrade!`, "error");
                    return;
                }
                
                // Deduct USDT if needed
                if (cost > 0) {
                    walletData.balances.USDT -= cost;
                }
                
                // Upgrade level
                walletData.mining.level = level;
                
                // Update UI
                updateMiningDisplay();
                updateTotalBalance();
                
                // Show success
                showMessage(`‚ö° Upgraded to level ${level}!`, "success");
                
            } catch (error) {
                console.error("‚ùå Error upgrading mining level:", error);
                showMessage("Failed to upgrade", "error");
            }
        }

        function updateTotalBalance() {
            if (!walletData.balances) return;
            
            const totalAMSK = walletData.balances.AMSK || 0;
            const totalUSD = totalAMSK * 0.001; // 1 AMSK = $0.001
            
            if (elements.totalBalanceAmsk) {
                elements.totalBalanceAmsk.textContent = totalAMSK.toLocaleString();
            }
            
            if (elements.totalBalanceUsd) {
                elements.totalBalanceUsd.textContent = totalUSD.toFixed(2);
            }
        }

        function showMessage(text, type = 'info') {
            const container = document.getElementById('notification-container');
            if (!container) return;
            
            const message = document.createElement('div');
            message.className = `message ${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            
            message.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${text}</span>
            `;
            
            container.appendChild(message);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                if (message.parentNode) {
                    message.style.opacity = '0';
                    setTimeout(() => {
                        if (message.parentNode) {
                            message.parentNode.removeChild(message);
                        }
                    }, 300);
                }
            }, 4000);
            
            console.log(`${type}: ${text}`);
        }

        // Initialize the app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üì± DOM fully loaded");
            setTimeout(initAlienMuskApp, 500);
        });

        // Make functions available globally
        window.initAlienMuskApp = initAlienMuskApp;
        window.handleMiningAction = handleMiningAction;
        window.upgradeMiningLevel = upgradeMiningLevel;
        window.showMessage = showMessage;

        console.log("üëΩ Alien Musk Quantum Platform v6.0 - Ready!");
    </script>
</body>
</html>
